<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice</title>
    <style>
      
      @page {
        size: A4;
        margin: 20mm;

        @bottom-left {
          content: "This invoice was generated by a computer system and is subject to human review and verification.";
        }

        @bottom-right {
          content: counter(page) "/" counter(pages); /* Page number */
        }
      }

      @media print{
        body{
          font-size: 12px;
        }
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        font-size: 18px;
      }

      .invoice-header{
        text-align: center;
        width: 100%;
      }

      .header_container{
        display: flex;
        justify-content: space-between;
      }

      .form{
        display: flex;
        justify-content: center;
        margin-top: 10px;
      }

      .header_container, .form, .payment-details {
        width: 100%;
        max-width: 800px;
      }

      table {
        border-collapse: collapse;
        width: 100%;
      }
      td,
      th {
        border: 1px solid black;
        text-align: center;
      }

      .payment-details{
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="invoice-header">
        <h1>SRM Termite and Pest Control (Invoice)</h1>
      </div>
      <% if(locals.jobs && locals.invoiceNo){ %>
      <div class="header_container">
        <div class="left_header">
          TECHNICIAN NAME:- YULESH RAJ MAHAT <br />
          ADDRESS:- 220/95 Station Rd, Auburn 2144 <br />
          Invoice No:- <%= invoiceNo %>
        </div>

        <div class="right-header">ABN:- 26203982841</div>
      </div>
      <div class="form">
        <table>
          <tr>
            <th>Job ID</th>
            <th>Date</th>
            <th>Customer</th>
            <th>Job Address</th>
            <th>Labour Charge($AUD)</th>
            <th>Payment</th>
          </tr>

          <% jobs.forEach(dateEntry => { %> <% dateEntry.jobs.forEach((job,
          index) => { %>
          <tr>
            <td><%= job.jobID %></td>
            <td><%= job.date %></td>
            <td><%= job.customerName %></td>
            <td><%= job.jobAddress %></td>
            <% if(index === 0){ %>
            <td rowspan="<%= job.rowSpan %>"><%= job.labourCharge %></td>
            <% } %>
            <td><%= job.paymentMethod %></td>
          </tr>
          <% }); %> <% }); %>
          <tr>
            <Td colspan="4">Total Labour Cost:-</Td>
            <td>$<%= locals.totalPay %></td>
            <td rowspan="2"></td>
          </tr>
          <tr>
            <td colspan="4">Total:-</td>
            <td>$<%= totalPay %></td>
          </tr>
        </table>
      </div>
      <% } %>
      <div class="payment-details">
        Total Amount to be paid:- <strong>$<%= totalPay %></strong><br>
        BANK DETAILS<br>
        BANK NAME:- ANZ Bank<br>
        BSB:- 012215<br>
        A/C NUMBER: 320951841<br>
        A/C NAME: YULESH MAHAT<br>
        OR<br>
        PAY ID: 01451545169<br>
      </div>

    </div>
  </body>
</html>
